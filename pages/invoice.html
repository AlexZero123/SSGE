<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title id="cabecalho">SSGE - Proposta de Serviço</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Theme style 
  <link rel="stylesheet" href="../dist/css/AdminLTE.min.css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
    
</head>
<body>
<div class="wrapper" id="corpo">
  <!-- Main content -->
  <section class="invoice">
    <!-- title row -->
    <div class="row">
      <div class="col-xs-12">
        <img src="../dist/img/KRAS.png" style="width: 20%">
          <img src="../dist/img/ISO.png" style="width: 20%">
      </div>
      <!-- /.col -->
    </div>
    <!-- info row -->
    <div class="row invoice-info">
      <div class="col-sm-4 invoice-col">
        De: 
        <address>
          <strong>KRAS Engenharia, Consultoria e Inspeção Ltda.</strong><br>
          Av. Papa Paulo VI, 40 - Jd.Vanessa<br>
          Mairiporã, SP 07600-000<br>
          Tel.: (11) 44861206<br>
          Email: kras@krasinspecao.com.br
        </address>
      </div>
      <!-- /.col -->
      <div class="col-sm-4 invoice-col">
        Para:
        <address id="cliente">
          
        </address>
      </div>
        
      <!-- /.col -->
      <div class="col-sm-4 invoice-col">

      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->

    <!-- Table row -->
    <div class="row">
      <div class="col-xs-12">
        <h4><b id="descricao"></b></h4><br>
            <p>Agradecemos pelo seu contato e interesse na nossa linha de serviços.<br>
                Informamos que a KRAS é uma empresa certificada ISO 9001:2015 com o seguinte escopo:<br>
                <b>"Engenharia e consultoria em soldagem. Gestão para execução de ensaios não destrutivos nos métodos: visual, líquido penetrante, partículas magnéticas e ultrassom. Qualificação de procedimentos de ensaios não destrutivos. Gestão para a execução de inspeção industrial nos métodos: dimensional, fabricação, pintura e teste por pontos."</b><br>
                Sendo os principais serviços:<br>
                	Inspeção de soldagem e END (Ensaios Não Destrutivos: Ensaio Visual, Líquido Penetrante, Partículas Magnéticas e Ultrassom);<br>
                	Ensaio de Dureza portátil por MIC10 (UCI).<br>
                	Reconhecimento de materiais por meio de teste PMI (Positive Material Identification).<br>
                	Diligenciamento, inspeção de fabricação, dimensional, pintura, teste por pontos e inspeção de liberação de produtos;<br>
                	Engenharia e consultoria em soldagem: qualificação de procedimentos de soldagem e soldadores, bem como elaboração de toda documentação técnica de soldagem;<br>
                	Execução de auditorias técnica.<br>
                	Qualificação de procedimentos de ensaios não destrutivos.<br>
                Conforme combinado, segue proposta técnica comercial abaixo, com as nossas melhores condições comerciais.<br>
                </p>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->

      <div class="row" style="page-break-before: always">
      <div class="col-xs-12">
        <h5><b>1. Objetivo</b></h5>
            <p>Estabelecer o investimento necessário para a prestação de serviço de consultoria e inspeção em soldagem e/ou ensaios não destrutivos e serviços correlacionados.<br></p>
            <p class="text-muted well well-sm no-shadow" style="margin-top: 10px;" id="escopo"></p>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->
      <div class="row">
      <div class="col-xs-12">
        <hr>
        <h5><b>2. Obrigações Contratada</b></h5>
        <div id="obContratada">
            
        </div>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->
      
    <div class="row">
      <div class="col-xs-12">
        <hr>
        <h5><b>3. Obrigações Contratante</b></h5>
        <div id="obContratante">
            
        </div>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->
      
    <div class="row">
      <div class="col-xs-12 table-responsive"  id="servicos">
        
      </div>
        <div class="col-xs-12">
            <br>
        <h5><b>Notas</b></h5>
        <div id="notas">
            <p>(1)	A KRAS é optante do Simples Nacional.<br>
                (2)	Qualquer necessidade não inclusa na tabela acima deverá ser identificada e apresentada o custo para a contratante.<br>
                (3)	Realização dos trabalhos: Somente serão iniciados com a aprovação desta proposta por e-mail ou fax.<br>
                (4)	Uma diária normal é considerada 8 horas trabalhadas dentro do horário comercial (7:00 às 17:00), acima de 8 horas trabalhadas é considerado como excedente.<br>
                (5)	Horas excedentes serão acrescidas conforme segue:
                	50% em dias úteis;<br>
                	50% aos sábados;<br>
                	100% aos domingos e feriados; e<br>
                	30% de adicional noturno para o período das 22:00 às 05:00 hs.<br>
                (6)	O tempo trabalhado é contabilizado nas instalações do cliente.
            </p>
        </div>
        </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->
    <!--  
    <div class="row">
      <div class="col-xs-12">
          <h4><b>Prazo de Entrega</b></h4>
          <p id="ensaios" style="display: block">Em até 5 dias após a soldagem do corpo de prova.</p>
          <p id="documentacao" style="display: block">Documentação: em até 3 dias úteis após a inspeção.</p>
          <p id="END" style="display: block"></p>
      </div>
      <!-- /.col -->
    <!--</div>
    <!-- /.row -->
      
    <div class="row" style="display: block">
      <div class="col-xs-12">
          <hr>
        <h5><b>5.  Prazo de Entrega</b></h5>
          <p>5.1 Serviço cobrado por meio de Nota Fiscal de serviço e pagamento por boleto bancário.</p>
          <p>5.2 Despesas cobrado por meio de Nota de Débito e pagamento por boleto bancário.</p>
          <p id="pagamento"></p>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->
    
    <div class="row">
      <div class="col-xs-12">
          <hr>
        <h5><b>6.  Anexos</b></h5>
          <p>6.1 N/A</p>
      </div>
    </div>
      
    <div class="row" style="display: block">
      <div class="col-xs-12">
          <hr>
        <h5><b>7.  Observações gerais</b></h5>
          <p>7.1 N/A</p>
      </div>
    </div>
      
    <div class="row">
      <div class="col-xs-12">
          <hr>
        <h5><b>8.  Confidencialidade</b></h5>
          <p>8.1 todas as informações obtidaspela KRAS são consideradas confidenciais e o cliente será informado previamente da informação que a KRAS irá tornar pública, caso seja obrigada por lei.</p>
          <p>8.2 A KRAS mantém a imparcialidade e confidencialidade nos resultados obtidos.</p>
      </div>
      <!-- /.col -->
      <!-- /.col -->
    </div>
    <!-- /.row -->
      
    <div class="row">
      <div class="col-xs-12">
        <hr>
        <h5><b>9.  Validade</b></h5>
          <p id="validade"></p>
      </div>
      <!-- /.col -->
    </div>
    
    <div class="row">
      <div class="col-xs-12">
        <hr>
        <h5><b>10.  Parceiros</b></h5>
          <img src="../dist/img/SQP.jpg" style="width: 20%">
          <h6><b>SQP Consultoria Eireli ME.</b></h6>
          <p>“Prestação de serviços de consultoria em implantação, treinamentos e auditorias em sistemas de gestão.”<br>
              Consultoria de up grade da ISO 9001, da versão 2008 para 2015.<br>
              Contato: alex.sqp@hotmail.com / 11-94797-3403 e rosemary@sqp.com.br / 11-94655-9687.</p>
      </div>
      <!-- /.col -->
    </div>
      <br><br><br><br>
      <hr>
    <div class="row">
      <!-- accepted payments column -->
      <div class="col-xs-5">
          <p><b>Aceite do cliente:</b> _____________________<br></p>
          <div class="col-xs-6"></div>
          <div class="col-xs-6"><small>Responsável</small></div>               
      </div>
    
      <!-- /.col -->
      <div class="col-xs-3">
        <p><b>Cargo:</b> _____________<br></p>   
      </div>
        
        <div class="col-xs-4">
        <p><b>Data do Aceite:</b> ___/___/_____<br></p>  
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->
  </section>
  <!-- /.content -->
</div>
<!-- ./wrapper -->

<script>
function nota(servicos){
    var cont = 7;
    for (var n = 0; n < servicos.length; n++) {
        var url = 'http://krasengenharia.com.br/server/get_nota_servico_json.php?servico=' + servicos[n];
        let xmlhr = new XMLHttpRequest();
        xmlhr.open("GET", url);
        xmlhr.onreadystatechange = function() {
            if(xmlhr.readyState === XMLHttpRequest.DONE && xmlhr.status === 200) {
                if(xmlhr.responseText.length>5){
                    var dados = JSON.parse(xmlhr.responseText); //faz a conversão do texto da WEB para JSON
                    var conteudo = document.getElementById('notas').innerHTML;
                    for(var c = 0; c < dados.length; c++) {
                        //alert(dados[c].descricao);
                        if(!conteudo.includes(dados[c].descricao)){
                            document.getElementById('notas').innerHTML += "(" + (cont++) + ")" + dados[c].descricao + "<br>";
                        }
                    }
                }
            }
        }
        xmlhr.send();
    }
}
</script>
<script>
    //if(!localStorage.getItem("username-colab")){document.getElementById("corpo").innerHTML = "";}
    let xhr1 = new XMLHttpRequest();
    url = 'http://krasengenharia.com.br/server/get_proposta_json.php';
    xhr1.open('GET', url);
    xhr1.send();
    xhr1.onload = function() {
        //alert(url);
      if (xhr1.status != 200) { // analyze HTTP status of the response
        alert(`Error ${xhr1.status}: ${xhr1.statusText}`); // e.g. 404: Not Found
      } else { // show the result
            var dados = JSON.parse(xhr1.responseText); //faz a conversão do texto da WEB para JSON
		  //alert(dados[0].Ano);
          //alert(xhr.responseText);
          //var conteudo = "<strong>" + dados[0].contato + "</strong><br>Tel.:" + dados[0].telefone + "<br>E-mail:" + dados[0].email
            document.getElementById('escopo').innerHTML = dados[0].escopo;
            document.getElementById('descricao').innerHTML = "PROPOSTA TÉCNICA COMERCIAL KRAS Nº ".concat(dados[0].ano, dados[0].mes, dados[0].dia, "-", dados[0].emissor, "-", dados[0].sequencia, " - Rev.", dados[0].revisao);
            document.getElementById('cabecalho').innerHTML = "".concat(dados[0].ano, dados[0].mes, dados[0].dia, "-", dados[0].emissor, "-", dados[0].sequencia, " - Rev.", dados[0].revisao);
            document.getElementById('cliente').innerHTML = "<strong>" + dados[0].cliente + "</strong><br>" + dados[0].contato + "<br>Tel.:" + dados[0].telefone + "<br>E-mail:" + dados[0].email;
          document.getElementById('notas').innerHTML += "<p>(*)" + dados[0].nota.split(';').join('<br>(*)') + "</p>";
          document.getElementById('pagamento').innerHTML = "5.3 " + dados[0].fp;
      }
    };
    xhr1.onerror = function() {
      alert("Request failed");
    };    
    var data = new Date();
    var val = data.getDate() + "/" + (data.getMonth()+2) + "/"+ data.getFullYear();
    document.getElementById('validade').innerHTML = "9.1 Até " + val;
</script>
<script>
    let xhr = new XMLHttpRequest();
    url = 'http://krasengenharia.com.br/server/get_servico_proposta_json.php';
    xhr.open('GET', url);
    xhr.send();
    xhr.onload = function() {
        //alert(url);
      if (xhr.status != 200) { // analyze HTTP status of the response
        alert(`Error ${xhr.status}: ${xhr.statusText}`); // e.g. 404: Not Found
      } else { // show the result
            var dados = JSON.parse(xhr.responseText); //faz a conversão do texto da WEB para JSON
            var i, l, servicos = [];
		  //alert(dados);
		  	var conteudo = '<hr><h4><b>4. Investimentos</b></h4><br><table class="table table-bordered"><thead><tr><th style="width: 30%">Serviço</th><th style="width: 10%">Preço</th><th style="width: 10%">Quantidade</th><th style="width: 10%">Prazo</th><th style="width: 40%">Escopo</th></tr></thead><tbody>';
            for(i = 0; i < dados.length; i +=4) //dados.length retorna o tamanho do vetor.
            {
                for(l = 0; l < dados.length; l++){
                    conteudo += '<tr><td>' + dados[(i*4)+l].servico + '</td><td>' + dados[(i*4)+l].preco + '</td><td>' + dados[(i*4)+l].quantidade + '</td><td>' + dados[(i*4)+l].prazo + '</td><td> ' + dados[(i*4)+l].escopo + '</td></tr>';
                        //alert(conteudo);
                    servicos.push(dados[(i*4)+l].servico);
                    //alert(dados[(i*4)+l].servico);
                }
                conteudo += '</div><div class="col-sm-12">';
            }
            document.getElementById('servicos').innerHTML = conteudo;
          nota(servicos);
      }
    };
    xhr.onerror = function() {
      alert("Request failed");
    };    
    
</script>
<script>
    let xhr2 = new XMLHttpRequest();
    url = 'http://krasengenharia.com.br/server/get_obrigacoes_proposta_json.php';
    xhr2.open('GET', url);
    xhr2.send();
    xhr2.onload = function() {
        //alert(combo);
      if (xhr2.status != 200) { // analyze HTTP status of the response
        alert(`Error ${xhr2.status}: ${xhr2.statusText}`); // e.g. 404: Not Found
      } else { // show the result
            var dados = JSON.parse(xhr2.responseText); //faz a conversão do texto da WEB para JSON
          var tnt = 1;
          var tda = 1;
            for(var i = 0; i<dados.length; i++){
                if(dados[i].tipo == "1"){
                     document.getElementById('obContratada').innerHTML += "2.".concat(tnt, " ", dados[i].descricao, "<br>");
                    tnt++;
                }else {
                    document.getElementById('obContratante').innerHTML += "3.".concat(tda, " ", dados[i].descricao, "<br>");
                    tda++;

                }
            }
          
      }
    };
    xhr2.onerror = function() {
      alert("Request failed");
    };
    setTimeout(function(){window.print();window.close();}, 2000);
    //window.onload = function() {window.print();}
</script>

</body>
</html>
